# rados block device using rbd-bench

- [Configuration and command](#configuration-and-command)
- [4k seq](#4k-seq)
- [4M seq](#4m-seq)
- [4k rand](#4k-rand)
- [4M rand](#4m-rand)

## Configuration and command
```sh
$ rbd bench-write block-device --io-size 4K \
--io-threads 1 --io-total 1024M --io-pattern seq \
--pool=bench
```

### 4k seq
------------------------ Test 1 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     15361  15362.56  62925052.85
    2     38065  19033.41  77960832.97
    3     61537  20504.39  83985964.77
    4     85667  21413.05  87707846.99
    5    109138  21827.85  89406858.25
    6    132742  23476.19  96158454.54
    7    155617  23510.28  96298087.10
    8    180792  23856.97  97718160.52
    9    203441  23553.70  96475941.37
   10    224693  23111.11  94663091.22
   11    248810  23213.64  95083071.01
elapsed:    11  ops:   262144  ops/sec: 22125.95  bytes/sec: 90627875.88
```

------------------------ Test 2 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     18149  18150.54  74344596.59
    2     34534  17120.59  70125950.88
    3     57685  19228.82  78761236.50
    4     81934  20483.90  83902063.52
    5    106214  21236.50  86984689.97
    6    127448  21859.73  89537467.93
    7    151575  23488.11  96207311.60
    8    175945  23651.92  96878272.98
    9    197350  23052.91  94424715.58
   10    221927  23148.34  94815618.15
   11    244461  23402.56  95856885.03
elapsed:    11  ops:   262144  ops/sec: 21993.52  bytes/sec: 90085473.93
```

------------------------ Test 3 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     15387  15388.21  63030113.15
    2     38009  18978.72  77736817.11
    3     61874  20624.44  84477720.90
    4     84359  21090.06  86384896.20
    5    105937  21187.60  86784412.88
    6    129544  22831.41  93517435.44
    7    151673  22644.68  92752624.19
    8    174202  22440.03  91914380.28
    9    198777  22873.31  93689077.32
   10    220841  22980.80  94129367.72
   11    243834  22856.49  93620199.01
elapsed:    11  ops:   262144  ops/sec: 21896.86  bytes/sec: 89689542.62
```

------------------------ Test 4 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     17401  15241.49  62429138.18
    2     35574  17787.69  72858376.85
    3     60047  20016.01  81985597.02
    4     83961  20934.20  85746484.83
    5    107513  21491.33  88028493.94
    6    130558  23291.71  95402848.66
    7    154203  23725.80  97180875.36
    8    175769  23141.77  94788697.97
    9    199291  23115.79  94682279.15
   10    223622  23234.27  95167578.81
   11    246779  23239.19  95187709.12
elapsed:    11  ops:   262144  ops/sec: 22189.77  bytes/sec: 90889302.10
```

------------------------ Test 5 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     16145  15948.78  65326189.79
    2     37650  18767.04  76869792.29
    3     58930  19643.64  80460358.04
    4     82373  20593.56  84351237.68
    5    106370  21274.17  87139002.67
    6    127084  22232.65  91064926.57
    7    150874  22673.13  92869144.59
    8    174696  23152.89  94834237.24
    9    197998  23125.03  94720115.10
   10    221356  22997.19  94196506.07
   11    245684  23730.92  97201867.62
elapsed:    11  ops:   262144  ops/sec: 21964.22  bytes/sec: 89965456.96
```

### 4M seq
------------------------ Test 1 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        21     20.48  85881429.94
    2        46     23.25  97528958.78
    3        72     24.21  101552139.15
    4        98     24.72  103683244.90
    5       125     24.86  104282788.68
    6       149     25.96  108875187.49
    7       178     26.34  110463771.23
    8       202     25.98  108960077.02
    9       229     26.16  109742295.04
   10       254     25.87  108497868.27
elapsed:    10  ops:      256  ops/sec:    24.76  bytes/sec: 103853498.44
```

------------------------ Test 2 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        25     24.27  101777464.74
    2        50     25.32  106191139.27
    3        73     24.12  101159423.60
    4        99     24.56  103014927.89
    5       122     24.49  102732490.12
    6       149     25.02  104939274.43
    7       177     25.36  106348089.07
    8       204     26.29  110273256.10
    9       229     26.19  109858904.75
   10       254     26.35  110513420.17
elapsed:    10  ops:      256  ops/sec:    24.88  bytes/sec: 104343262.10
```

------------------------ Test 3 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        26     25.34  106304130.10
    2        50     25.41  106576958.11
    3        78     25.94  108810838.56
    4       105     26.43  110840324.38
    5       130     26.16  109725747.81
    6       158     26.47  111004237.81
    7       185     27.03  113381779.73
    8       211     26.69  111949084.97
    9       236     26.24  110079079.17
elapsed:     9  ops:      256  ops/sec:    25.74  bytes/sec: 107978692.24
```

------------------------ Test 4 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        22     22.76  95454089.85
    2        47     23.45  98344889.19
    3        74     24.52  102828761.90
    4        99     24.63  103299945.57
    5       124     24.92  104533172.35
    6       150     25.53  107066724.20
    7       175     25.79  108163821.82
    8       199     25.08  105192490.88
    9       225     25.21  105727200.24
   10       251     25.40  106543762.08
elapsed:    10  ops:      256  ops/sec:    24.67  bytes/sec: 103476325.51
```

------------------------ Test 5 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        21     20.55  86191636.30
    2        47     23.78  99757467.03
    3        73     24.60  103189487.89
    4        98     24.56  103018667.82
    5       124     24.74  103785412.74
    6       149     25.53  107088462.27
    7       174     25.31  106172004.93
    8       200     25.23  105825003.23
    9       226     25.45  106760689.40
   10       251     25.58  107290890.01
elapsed:    10  ops:      256  ops/sec:    24.35  bytes/sec: 102142079.33
```

### 4k rand
------------------------ Test 1 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     14722  14722.70  60304180.93
    2     39284  19642.72  80456600.10
    3     61297  20427.23  83669944.59
    4     83850  20962.96  85864275.13
    5    106222  21244.57  87017761.69
    6    128997  22855.21  93614958.43
    7    152808  22704.86  92999086.38
    8    176177  22979.67  94124712.45
    9    199450  23119.87  94698987.38
   10    221836  23122.94  94711560.80
   11    245839  23368.33  95716670.52
elapsed:    11  ops:   262144  ops/sec: 22088.00  bytes/sec: 90472440.31
```

------------------------ Test 2 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     14738  13372.60  54774150.05
    2     34195  17094.01  70017073.68
    3     58535  19512.25  79922156.54
    4     81426  20356.83  83381575.06
    5    105124  21025.12  86118871.86
    6    127704  23064.71  94473063.26
    7    149323  23027.82  94321968.50
    8    171804  22653.80  92789951.46
    9    194022  22519.13  92238369.05
   10    216603  22295.69  91323153.08
   11    239729  22404.94  91770639.73
elapsed:    12  ops:   262144  ops/sec: 21434.86  bytes/sec: 87797174.19
```

------------------------ Test 3 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     15286  15287.59  62617984.71
    2     35821  17911.32  73364784.56
    3     58000  19333.76  79191099.61
    4     81912  20478.43  83879653.45
    5    105921  21184.53  86771846.11
    6    128627  22668.14  92848704.01
    7    153426  23520.99  96341960.47
    8    178165  24033.06  98439407.80
    9    202227  24062.89  98561594.91
   10    225236  23862.98  97742782.41
   11    248007  23876.02  97796174.41
elapsed:    11  ops:   262144  ops/sec: 22157.82  bytes/sec: 90758440.82
```

------------------------ Test 4 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     14077  14078.01  57663541.63
    2     35107  17553.93  71900903.77
    3     58623  19541.30  80041160.99
    4     81649  20412.52  83609695.67
    5    104155  20831.20  85324593.27
    6    127835  22751.65  93190753.20
    7    152188  23276.57  95340840.85
    8    172974  22870.21  93676383.32
    9    196413  22952.80  94014651.78
   10    220472  23263.07  95285527.30
   11    241142  22661.39  92821042.23
elapsed:    12  ops:   262144  ops/sec: 21727.06  bytes/sec: 88994030.69
```

------------------------ Test 5 ------------------------
```
bench-write  io_size 4096 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1     18072  18049.27  73929824.51
    2     41723  20862.44  85452548.64
    3     65129  21710.15  88924775.33
    4     87376  21843.01  89468979.96
    5    111177  22235.35  91076009.55
    6    135139  23419.68  95926995.53
    7    158237  23302.69  95447802.59
    8    182103  23394.78  95825002.14
    9    205272  23579.44  96581370.15
   10    227618  23288.53  95389830.68
   11    249167  22773.86  93281723.40
elapsed:    11  ops:   262144  ops/sec: 22287.19  bytes/sec: 91288341.50
```

### 4M rand
------------------------ Test 1 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        21     21.41  89803976.83
    2        47     23.94  100429871.47
    3        70     23.63  99126673.63
    4        97     24.41  102387553.91
    5       122     24.49  102735957.91
    6       148     25.38  106455439.97
    7       173     25.08  105207639.76
    8       199     25.38  106443419.65
    9       225     25.26  105965859.97
   10       247     24.93  104564634.59
elapsed:    10  ops:      256  ops/sec:    24.23  bytes/sec: 101645645.87
```

------------------------ Test 2 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        20     20.37  85458627.98
    2        45     22.99  96421876.13
    3        72     23.71  99432971.81
    4        98     24.63  103322872.40
    5       125     25.15  105485333.72
    6       151     26.29  110252872.03
    7       178     26.34  110484725.60
    8       201     26.16  109736477.47
    9       229     25.85  108405411.93
   10       254     25.74  107959124.89
elapsed:    10  ops:      256  ops/sec:    24.96  bytes/sec: 104686632.39
```

------------------------ Test 3 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        23     22.63  94905889.26
    2        50     25.03  104991817.94
    3        77     25.64  107532774.69
    4       104     26.03  109158665.88
    5       128     25.78  108129925.52
    6       153     26.25  110080614.79
    7       180     26.21  109917448.38
    8       205     25.55  107166858.60
    9       233     25.43  106653598.90
elapsed:    10  ops:      256  ops/sec:    25.27  bytes/sec: 105980494.59
```

------------------------ Test 4 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        19     18.82  78948435.40
    2        44     22.44  94118820.80
    3        69     22.84  95788923.05
    4        95     23.96  100513776.08
    5       124     24.84  104169414.51
    6       151     26.70  111984531.65
    7       177     26.57  111438421.38
    8       204     27.20  114105721.60
    9       230     26.89  112770100.06
elapsed:    10  ops:      256  ops/sec:    25.00  bytes/sec: 104851200.57
```

------------------------ Test 5 ------------------------
```
bench-write  io_size 4194304 io_threads 1 bytes 1073741824 pattern seq
  SEC       OPS   OPS/SEC   BYTES/SEC
    1        21     21.35  89541951.02
    2        46     23.38  98083733.43
    3        72     24.32  102009111.20
    4        98     24.39  102290776.15
    5       123     24.72  103681607.77
    6       151     26.06  109317394.98
    7       176     26.01  109102884.94
    8       202     25.90  108635163.07
    9       226     25.81  108273173.41
   10       251     25.66  107610331.18
elapsed:    10  ops:      256  ops/sec:    24.72  bytes/sec: 103685666.84
```
